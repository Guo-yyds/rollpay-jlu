{"ast":null,"code":"import { timecardList, timecardSubmit } from '@/api/timecard';\nexport default {\n  data() {\n    return {\n      items: []\n    };\n  },\n  created() {\n    this.getData();\n  },\n  methods: {\n    formatDate(row, column) {\n      const date = new Date(row.date);\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    async getData() {\n      const id = this.$store.state.userInfo.id;\n      console.log(id);\n      const res = await timecardList(this.$store.state.userInfo.id);\n      console.log(res);\n      if (res.code === 1) {\n        this.items = res.data;\n      }\n    },\n    async submit(id) {\n      console.log(id);\n      const res = await timecardSubmit(id);\n      console.log(res);\n      if (res.code === 1) {\n        this.$message({\n          message: '提交成功',\n          type: 'success'\n        });\n        this.getData();\n      }\n    }\n  }\n};","map":{"version":3,"names":["timecardList","timecardSubmit","data","items","created","getData","methods","formatDate","row","column","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","id","$store","state","userInfo","console","log","res","code","submit","$message","message","type"],"sources":["src/views/timecardShow.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-table :data=\"items\"  border  style=\"width: 100%\">\r\n    <el-table-column  prop=\"id\"  label=\"序号\"> </el-table-column>\r\n    <el-table-column  prop=\"date\"  label=\"日期\" :formatter=\"formatDate\">\r\n    </el-table-column>\r\n    <el-table-column  prop=\"time\"  label=\"时间\"> </el-table-column>\r\n    <el-table-column  prop=\"projectid\"  label=\"项目id\"> </el-table-column>\r\n    <el-table-column  prop=\"issubmit\"  label=\"是否提交\"> </el-table-column>\r\n    <el-table-column label=\"状态\">\r\n      <template slot-scope=\"scope\">\r\n        <el-button @click=\"openDialog\">打开弹窗</el-button>\r\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"输入时间\">\r\n      <el-time-picker v-model=\"inputTime\" placeholder=\"请选择时间\"></el-time-picker>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleModify\">修改</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n        <el-button type=\"primary\" @click=\"submit(scope.row.id)\" :disabled=\"scope.row.issubmit == 1\">提交</el-button>\r\n      </template>\r\n    </el-table-column>\r\n\r\n  </el-table>\r\n  </div>\r\n  </template>\r\n\r\n<script>\r\nimport { timecardList, timecardSubmit } from '@/api/timecard'\r\nexport default {\r\n  data () {\r\n    return {\r\n      items: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    formatDate (row, column) {\r\n      const date = new Date(row.date)\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    },\r\n    async getData () {\r\n      const id = this.$store.state.userInfo.id\r\n      console.log(id)\r\n      const res = await timecardList(this.$store.state.userInfo.id)\r\n      console.log(res)\r\n      if (res.code === 1) {\r\n        this.items = res.data\r\n      }\r\n    },\r\n    async submit (id) {\r\n      console.log(id)\r\n      const res = await timecardSubmit(id)\r\n      console.log(res)\r\n      if (res.code === 1) {\r\n        this.$message({\r\n          message: '提交成功',\r\n          type: 'success'\r\n        })\r\n        this.getData()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n  <style>\r\n\r\n  </style>\r\n"],"mappings":"AA6BA,SAAAA,YAAA,EAAAC,cAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAC,WAAAC,GAAA,EAAAC,MAAA;MACA,MAAAC,IAAA,OAAAC,IAAA,CAAAH,GAAA,CAAAE,IAAA;MACA,MAAAE,IAAA,GAAAF,IAAA,CAAAG,WAAA;MACA,MAAAC,KAAA,GAAAC,MAAA,CAAAL,IAAA,CAAAM,QAAA,QAAAC,QAAA;MACA,MAAAC,GAAA,GAAAH,MAAA,CAAAL,IAAA,CAAAS,OAAA,IAAAF,QAAA;MACA,UAAAL,IAAA,IAAAE,KAAA,IAAAI,GAAA;IACA;IACA,MAAAb,QAAA;MACA,MAAAe,EAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAH,EAAA;MACAI,OAAA,CAAAC,GAAA,CAAAL,EAAA;MACA,MAAAM,GAAA,SAAA1B,YAAA,MAAAqB,MAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAH,EAAA;MACAI,OAAA,CAAAC,GAAA,CAAAC,GAAA;MACA,IAAAA,GAAA,CAAAC,IAAA;QACA,KAAAxB,KAAA,GAAAuB,GAAA,CAAAxB,IAAA;MACA;IACA;IACA,MAAA0B,OAAAR,EAAA;MACAI,OAAA,CAAAC,GAAA,CAAAL,EAAA;MACA,MAAAM,GAAA,SAAAzB,cAAA,CAAAmB,EAAA;MACAI,OAAA,CAAAC,GAAA,CAAAC,GAAA;MACA,IAAAA,GAAA,CAAAC,IAAA;QACA,KAAAE,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA,KAAA1B,OAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}